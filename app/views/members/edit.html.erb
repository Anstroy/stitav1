<%= render 'layouts/member_style' %>

<div id="page-top">
  <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top" id="sideNav">
        <a class="navbar-brand js-scroll-trigger" href="#page-top">
            <span class="d-block d-lg-none"><%= @member.fn %> <%= @member.ln %></span>
            <span class="d-none d-lg-block">
              <img class="img-fluid img-profile rounded-circle mx-auto mb-2" src="<%= @member.photo %>" alt="">
            </span>
        </a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
          <ul class="navbar-nav">
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#about">About</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#experience">Experience</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#education">Education</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#skills">Skills</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#interests">Interests</a>
              </li>
              <li class="nav-item">
                  <a class="nav-link js-scroll-trigger" href="#awards">Awards</a>
              </li>
              <hr> 
                <% if current_user && (current_user.admin? or current_user.id == @member.id) %>
                  <%# ACTIONS %>
                  <%= render 'actions' %>
                <% end %>
              <li class="nav-item">
                  <%= link_to '<i class="fas fa-arrow-left"></i> return'.html_safe, members_path, :class => 'nav-link js-scroll-trigger' %>
              </li>
          </ul>
        </div>
    </nav>
    <div class="container-fluid p-0">
        <section class="resume-section p-3 p-lg-5 d-flex d-column" id="about">
            <div class="my-auto">
              <% # if logged in user is the owner of this profile allow them to edit %>
              <% if :validate_user? %>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editUserModal">
                  <i class="fas fa-user-cog"></i> Edit Profile
                </button>
              <% end %>
              <h1 class="mb-0"><%= @member.fn %>
                <span class="text-primary"><%= @member.ln %></span>
              </h1>
              <p></p>
              <h3><%= @member.position.name %> @ <%= link_to 'STITA', root_path, class: 'text-info' %></h3>              
              <!-- <div class="subheading mb-5"><%= @member.address %> · <%= @member.city %>, <%= @member.state %> <%= @member.zip %> · <%= @member.phone %> ·
                <a href="<%= @member.email %>"><%= @member.email %></a>
              </div> -->
              <p class="lead mb-5"><%= @member.about %></p>
              <div class="social-icons">
                <%= link_to '<i class="fab fa-linkedin-in"></i>'.html_safe, url_for(@member.linkedin), data: { confirm: "You are leaving this website" } unless @member.linkedin.to_s.empty? %>
                <%= link_to '<i class="fab fa-github"></i>'.html_safe, url_for(@member.github), data: { confirm: "You are leaving this website" } unless @member.github.to_s.empty? %>
                <%= link_to '<i class="fab fa-twitter"></i>'.html_safe, url_for(@member.twitter), data: { confirm: "You are leaving this website" } unless @member.twitter.to_s.empty? %>
                <%= link_to '<i class="fab fa-facebook-f"></i>'.html_safe, url_for(@member.facebook), data: { confirm: "You are leaving this website" } unless @member.facebook.to_s.empty? %>
                <%= link_to '<i class="fab fa-instagram"></i>'.html_safe, url_for(@member.instagram), data: { confirm: "You are leaving this website" } unless @member.instagram.to_s.empty? %>
              </div>
            </div>
            </section>
            
            <hr class="m-0">
            
            <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="experience">
            <div class="my-auto">
              <h2 class="mb-5">Experience</h2>
            
              <% @member.experiences.each do |exp| %>
                <!-- Position -->
                <div class="resume-item d-flex flex-column flex-md-row mb-5">
                  <div class="resume-content mr-auto">
                    <h3 class="mb-0"><%= exp.pos_name %></h3>
                    <div class="subheading mb-3"><%= exp.company %></div>
                    <p><%= exp.description %></p>
                  </div>
                  <div class="resume-date text-md-right">
                    <span class="text-primary"><%= exp.start.try(:strftime, '%b %Y') %> - <%= exp.end.try(:strftime, '%b %Y') %></span>
                  </div>
                </div>
              <% end %>
              
            
            </div>
        
        </section>
    
          <hr class="m-0">
    
          <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="education">
            <div class="my-auto">
              <% if :validate_user? %>
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#editEducationModal">
                  <i class="fas fa-user-cog"></i> Add Education
                </button>
              <% end %>
              <h2 class="mb-5">Education</h2>
              <%= render 'layouts/alerts' %>
              
            <h4>Edit Educations</h4>
            <div id="accordion">
              <% @member.educations.each_with_index do |eds, index| %>
                <div class="card">
                  <div class="card-header" id="headingOne">
                    <h5 class="mb-0">
                      <button class="btn btn-link" data-toggle="collapse" data-target="#edu<%= index %>" aria-expanded="false" aria-controls="collapseOne">
                        <%= eds.school %>
                      </button>
                    </h5>
                  </div>

                  <div id="edu<%= index %>" class="collapse" aria-labelledby="headingOne" data-parent="#accordion">
                    <%= simple_form_for(eds) do |f| %>
                      <div class="card-body">
                        <div class="card-text">
                          <div class="row">
                            <div class="col-md-6">
                              <%= f.input :school %>
                            </div>
                            <div class="col-md-6">
                              <%= f.input :degree %>
                            </div>
                            <div class="col-md-6">
                              <%= f.input :start %>
                            </div>
                            <div class="col-md-6">
                              <%= f.input :end %>
                            </div>
                            <div class="col-md-12">
                              <%= f.input :info %>
                            </div>
                            <%= f.hidden_field :member_id %>
                          </div>
                        </div>
                        <%= f.button :submit , :class => 'btn btn-primary' %>
                            <%= link_to '<i class="fas fa-trash"></i> Delete'.html_safe, eds, method: :delete, data: { confirm: 'Are you sure?' }, :class => 'btn btn-danger' %>
                      </div>
                    <% end %>
                  </div>
                </div>
              <% end %>
            </div>

              
    
            </div>
          </section>
    
          <hr class="m-0">
    
          <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="skills">
            <div class="my-auto">
              <h2 class="mb-5">Skills</h2>
    
              <div class="subheading mb-3">Programming Languages &amp; Tools</div>
              <ul class="list-inline dev-icons">
                <li class="list-inline-item">
                  <i class="fab fa-html5"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-css3-alt"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-js-square"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-angular"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-react"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-node-js"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-sass"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-less"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-wordpress"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-gulp"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-grunt"></i>
                </li>
                <li class="list-inline-item">
                  <i class="fab fa-npm"></i>
                </li>
              </ul>
    
              <!--div class="subheading mb-3">Workflow</div-->
              <ul class="fa-ul mb-0">
                <% @member.skills.each do |skill| %>
                  <li>
                    <i class="fa-li fa fa-check"></i>
                    <%= skill.name %>, <%= skill.info %>
                  </li>
                <% end %>
              </ul>
            </div>
          </section>
    
          <hr class="m-0">
    
          <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="interests">
            <div class="my-auto">
              <h2 class="mb-5">Interests</h2>
              <p><%= @member.interests %></p>
            </div>
          </section>
    
          <hr class="m-0">
    
          <section class="resume-section p-3 p-lg-5 d-flex flex-column" id="awards">
            <div class="my-auto">
              <h2 class="mb-5">Awards &amp; Certifications</h2>
              <ul class="fa-ul mb-0">
                <% @member.awards.each do |award| %>
                  <li>
                    <i class="fa-li fa fa-trophy text-warning"></i>
                    <%= award.name %> - <%= award.year.try(:strftime, '%Y') %>
                  </li>
                <% end %>
              </ul>
            </div>
          </section>
    
    </div>

</div>

<%= link_to 'Edit', edit_member_path(@member) %> |
<%= link_to 'Back', members_path %>


<%= render 'edituser_modal' %>
<%= render 'editeducation_modal' %>
